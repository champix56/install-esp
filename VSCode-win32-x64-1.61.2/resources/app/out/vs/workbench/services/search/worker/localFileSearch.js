/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var te=["require","exports","vs/base/common/strings","vs/base/common/extpath","vs/base/common/path","vs/base/common/uri","vs/base/common/platform","vs/base/common/glob","vs/base/common/arrays","vs/base/common/errors","vs/base/common/map","vs/base/common/network","vs/base/common/resources","vs/base/common/async","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],ie=function(V){for(var e=[],R=0,S=V.length;R<S;R++)e[R]=te[V[R]];return e};define(te[8],ie([0,1,9]),function(V,e,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayQueue=e.maxIndex=e.minIndex=e.splice=e.insertInto=e.mapFind=e.getRandomElement=e.asArray=e.mapArrayOrNot=e.pushToEnd=e.pushToStart=e.shuffle=e.arrayInsert=e.remove=e.insert=e.index=e.range=e.flatten=e.commonPrefixLength=e.firstOrDefault=e.lastIndex=e.findLast=e.uniqueFilter=e.distinctES6=e.distinct=e.isNonEmptyArray=e.isFalsyOrEmpty=e.move=e.coalesceInPlace=e.coalesce=e.topAsync=e.top=e.delta=e.sortedDiff=e.groupBy=e.quickSelect=e.findFirstInSorted=e.binarySearch=e.equals=e.tail2=e.tail=void 0;function S(i,s=0){return i[i.length-(1+s)]}e.tail=S;function p(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}e.tail2=p;function C(i,s,l=(f,u)=>f===u){if(i===s)return!0;if(!i||!s||i.length!==s.length)return!1;for(let f=0,u=i.length;f<u;f++)if(!l(i[f],s[f]))return!1;return!0}e.equals=C;function O(i,s,l){let f=0,u=i.length-1;for(;f<=u;){const P=(f+u)/2|0,b=l(i[P],s);if(b<0)f=P+1;else if(b>0)u=P-1;else return P}return-(f+1)}e.binarySearch=O;function v(i,s){let l=0,f=i.length;if(f===0)return 0;for(;l<f;){const u=Math.floor((l+f)/2);s(i[u])?f=u:l=u+1}return l}e.findFirstInSorted=v;function k(i,s,l){if(i=i|0,i>=s.length)throw new TypeError("invalid index");let f=s[Math.floor(s.length*Math.random())],u=[],P=[],b=[];for(let M of s){const j=l(M,f);j<0?u.push(M):j>0?P.push(M):b.push(M)}return i<u.length?k(i,u,l):i<u.length+b.length?b[0]:k(i-(u.length+b.length),P,l)}e.quickSelect=k;function q(i,s){const l=[];let f;for(const u of i.slice(0).sort(s))!f||s(f[0],u)!==0?(f=[u],l.push(f)):f.push(u);return l}e.groupBy=q;function L(i,s,l){const f=[];function u(M,j,G){if(j===0&&G.length===0)return;const Z=f[f.length-1];Z&&Z.start+Z.deleteCount===M?(Z.deleteCount+=j,Z.toInsert.push(...G)):f.push({start:M,deleteCount:j,toInsert:G})}let P=0,b=0;for(;;){if(P===i.length){u(P,0,s.slice(b));break}if(b===s.length){u(P,i.length-P,[]);break}const M=i[P],j=s[b],G=l(M,j);G===0?(P+=1,b+=1):G<0?(u(P,1,[]),P+=1):G>0&&(u(P,0,[j]),b+=1)}return f}e.sortedDiff=L;function $(i,s,l){const f=L(i,s,l),u=[],P=[];for(const b of f)u.push(...i.slice(b.start,b.start+b.deleteCount)),P.push(...b.toInsert);return{removed:u,added:P}}e.delta=$;function Q(i,s,l){if(l===0)return[];const f=i.slice(0,l).sort(s);return h(i,s,f,l,i.length),f}e.top=Q;function F(i,s,l,f,u){return l===0?Promise.resolve([]):new Promise((P,b)=>{(async()=>{const M=i.length,j=i.slice(0,l).sort(s);for(let G=l,Z=Math.min(l+f,M);G<M;G=Z,Z=Math.min(Z+f,M)){if(G>l&&await new Promise(le=>setTimeout(le)),u&&u.isCancellationRequested)throw(0,R.canceled)();h(i,s,j,G,Z)}return j})().then(P,b)})}e.topAsync=F;function h(i,s,l,f,u){for(const P=l.length;f<u;f++){const b=i[f];if(s(b,l[P-1])<0){l.pop();const M=v(l,j=>s(b,j)<0);l.splice(M,0,b)}}}function _(i){return i.filter(s=>!!s)}e.coalesce=_;function I(i){let s=0;for(let l=0;l<i.length;l++)i[l]&&(i[s]=i[l],s+=1);i.length=s}e.coalesceInPlace=I;function U(i,s,l){i.splice(l,0,i.splice(s,1)[0])}e.move=U;function N(i){return!Array.isArray(i)||i.length===0}e.isFalsyOrEmpty=N;function w(i){return Array.isArray(i)&&i.length>0}e.isNonEmptyArray=w;function A(i,s){if(!s)return i.filter((f,u)=>i.indexOf(f)===u);const l=Object.create(null);return i.filter(f=>{const u=s(f);return l[u]?!1:(l[u]=!0,!0)})}e.distinct=A;function D(i){const s=new Set;return i.filter(l=>s.has(l)?!1:(s.add(l),!0))}e.distinctES6=D;function B(i){const s=Object.create(null);return l=>{const f=i(l);return s[f]?!1:(s[f]=!0,!0)}}e.uniqueFilter=B;function E(i,s){const l=t(i,s);if(l!==-1)return i[l]}e.findLast=E;function t(i,s){for(let l=i.length-1;l>=0;l--){const f=i[l];if(s(f))return l}return-1}e.lastIndex=t;function n(i,s){return i.length>0?i[0]:s}e.firstOrDefault=n;function r(i,s,l=(f,u)=>f===u){let f=0;for(let u=0,P=Math.min(i.length,s.length);u<P&&l(i[u],s[u]);u++)f++;return f}e.commonPrefixLength=r;function m(i){return[].concat(...i)}e.flatten=m;function y(i,s){let l=typeof s=="number"?i:0;typeof s=="number"?l=i:(l=0,s=i);const f=[];if(l<=s)for(let u=l;u<s;u++)f.push(u);else for(let u=l;u>s;u--)f.push(u);return f}e.range=y;function W(i,s,l){return i.reduce((f,u)=>(f[s(u)]=l?l(u):u,f),Object.create(null))}e.index=W;function K(i,s){return i.push(s),()=>Y(i,s)}e.insert=K;function Y(i,s){const l=i.indexOf(s);if(l>-1)return i.splice(l,1),s}e.remove=Y;function z(i,s,l){const f=i.slice(0,s),u=i.slice(s);return f.concat(l,u)}e.arrayInsert=z;function X(i,s){let l;if(typeof s=="number"){let f=s;l=()=>{const u=Math.sin(f++)*179426549;return u-Math.floor(u)}}else l=Math.random;for(let f=i.length-1;f>0;f-=1){const u=Math.floor(l()*(f+1)),P=i[f];i[f]=i[u],i[u]=P}}e.shuffle=X;function H(i,s){const l=i.indexOf(s);l>-1&&(i.splice(l,1),i.unshift(s))}e.pushToStart=H;function J(i,s){const l=i.indexOf(s);l>-1&&(i.splice(l,1),i.push(s))}e.pushToEnd=J;function ee(i,s){return Array.isArray(i)?i.map(s):s(i)}e.mapArrayOrNot=ee;function x(i){return Array.isArray(i)?i:[i]}e.asArray=x;function ne(i){return i[Math.floor(Math.random()*i.length)]}e.getRandomElement=ne;function re(i,s){for(const l of i){const f=s(l);if(f!==void 0)return f}}e.mapFind=re;function T(i,s,l){const f=g(i,s),u=i.length,P=l.length;i.length=u+P;for(let b=u-1;b>=f;b--)i[b+P]=i[b];for(let b=0;b<P;b++)i[b+f]=l[b]}e.insertInto=T;function a(i,s,l,f){const u=g(i,s),P=i.splice(u,l);return T(i,u,f),P}e.splice=a;function g(i,s){return s<0?Math.max(s+i.length,0):Math.min(s,i.length)}function o(i,s){let l=Number.MAX_SAFE_INTEGER,f=0;return i.forEach((u,P)=>{const b=s(u);b<l&&(l=b,f=P)}),f}e.minIndex=o;function c(i,s){let l=Number.MIN_SAFE_INTEGER,f=0;return i.forEach((u,P)=>{const b=s(u);b>l&&(l=b,f=P)}),f}e.maxIndex=c;class d{constructor(s){this.items=s,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(s){let l=this.firstIdx;for(;l<this.items.length&&s(this.items[l]);)l++;const f=l===this.firstIdx?null:this.items.slice(this.firstIdx,l);return this.firstIdx=l,f}takeFromEndWhile(s){let l=this.lastIdx;for(;l>=0&&s(this.items[l]);)l--;const f=l===this.lastIdx?null:this.items.slice(l+1,this.lastIdx+1);return this.lastIdx=l,f}peek(){return this.items[this.firstIdx]}}e.ArrayQueue=d}),define(te[3],ie([0,1,4,6,2,17]),function(V,e,R,S,p,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function O(t){return t===47||t===92}e.isPathSeparator=O;function v(t){return t.replace(/[\\/]/g,R.posix.sep)}e.toSlashes=v;function k(t){return t.indexOf("/")===-1&&(t=v(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}e.toPosixPath=k;function q(t,n=R.posix.sep){if(!t)return"";const r=t.length,m=t.charCodeAt(0);if(O(m)){if(O(t.charCodeAt(1))&&!O(t.charCodeAt(2))){let W=3;const K=W;for(;W<r&&!O(t.charCodeAt(W));W++);if(K!==W&&!O(t.charCodeAt(W+1))){for(W+=1;W<r;W++)if(O(t.charCodeAt(W)))return t.slice(0,W+1).replace(/[\\/]/g,n)}}return n}else if(U(m)&&t.charCodeAt(1)===58)return O(t.charCodeAt(2))?t.slice(0,2)+n:t.slice(0,2);let y=t.indexOf("://");if(y!==-1){for(y+=3;y<r;y++)if(O(t.charCodeAt(y)))return t.slice(0,y+1)}return""}e.getRoot=q;function L(t){if(!S.isWindows||!t||t.length<5)return!1;let n=t.charCodeAt(0);if(n!==92||(n=t.charCodeAt(1),n!==92))return!1;let r=2;const m=r;for(;r<t.length&&(n=t.charCodeAt(r),n!==92);r++);return!(m===r||(n=t.charCodeAt(r+1),isNaN(n)||n===92))}e.isUNC=L;const $=/[\\/:\*\?"<>\|]/g,Q=/[\\/]/g,F=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function h(t,n=S.isWindows){const r=n?$:Q;return!(!t||t.length===0||/^\s+$/.test(t)||(r.lastIndex=0,r.test(t))||n&&F.test(t)||t==="."||t===".."||n&&t[t.length-1]==="."||n&&t.length!==t.trim().length||t.length>255)}e.isValidBasename=h;function _(t,n,r){const m=t===n;return!r||m?m:!t||!n?!1:(0,p.equalsIgnoreCase)(t,n)}e.isEqual=_;function I(t,n,r,m=R.sep){if(t===n)return!0;if(!t||!n||n.length>t.length)return!1;if(r){if(!(0,p.startsWithIgnoreCase)(t,n))return!1;if(n.length===t.length)return!0;let W=n.length;return n.charAt(n.length-1)===m&&W--,t.charAt(W)===m}return n.charAt(n.length-1)!==m&&(n+=m),t.indexOf(n)===0}e.isEqualOrParent=I;function U(t){return t>=65&&t<=90||t>=97&&t<=122}e.isWindowsDriveLetter=U;function N(t,n){return S.isWindows&&t.endsWith(":")&&(t+=R.sep),(0,R.isAbsolute)(t)||(t=(0,R.join)(n,t)),t=(0,R.normalize)(t),S.isWindows?(t=(0,p.rtrim)(t,R.sep),t.endsWith(":")&&(t+=R.sep)):(t=(0,p.rtrim)(t,R.sep),t||(t=R.sep)),t}e.sanitizeFilePath=N;function w(t){const n=(0,R.normalize)(t);return S.isWindows?t.length>3?!1:A(n)&&(t.length===2||n.charCodeAt(2)===92):n===R.posix.sep}e.isRootOrDriveLetter=w;function A(t){return S.isWindows?U(t.charCodeAt(0))&&t.charCodeAt(1)===58:!1}e.hasDriveLetter=A;function D(t){return A(t)?t[0]:void 0}e.getDriveLetter=D;function B(t,n,r){return n.length>t.length?-1:t===n?0:(r&&(t=t.toLowerCase(),n=n.toLowerCase()),t.indexOf(n))}e.indexOfPath=B;function E(t){const n=t.split(":");let r,m,y;if(n.forEach(W=>{const K=Number(W);(0,C.isNumber)(K)?m===void 0?m=K:y===void 0&&(y=K):r=r?[r,W].join(":"):W}),!r)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:r,line:m!==void 0?m:void 0,column:y!==void 0?y:m!==void 0?1:void 0}}e.parseLineAndColumnAware=E});var oe=this&&this.__classPrivateFieldSet||function(V,e,R,S,p){if(S==="m")throw new TypeError("Private method is not writable");if(S==="a"&&!p)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?V!==e||!p:!e.has(V))throw new TypeError("Cannot write private member to an object whose class did not declare it");return S==="a"?p.call(V,R):p?p.value=R:e.set(V,R),R},se=this&&this.__classPrivateFieldGet||function(V,e,R,S){if(R==="a"&&!S)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?V!==e||!S:!e.has(V))throw new TypeError("Cannot read private member from an object whose class did not declare it");return R==="m"?S:R==="a"?S.call(V):S?S.value:e.get(V)};define(te[10],ie([0,1,8,2,5]),function(V,e,R,S,p){"use strict";var C,O,v;Object.defineProperty(e,"__esModule",{value:!0}),e.ReadonlyMapView=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceMap=e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=e.setToString=e.mapToString=e.getOrSet=void 0;function k(E,t,n){let r=E.get(t);return r===void 0&&(r=n,E.set(t,r)),r}e.getOrSet=k;function q(E){const t=[];return E.forEach((n,r)=>{t.push(`${r} => ${n}`)}),`Map(${E.size}) {${t.join(", ")}}`}e.mapToString=q;function L(E){const t=[];return E.forEach(n=>{t.push(n)}),`Set(${E.size}) {${t.join(", ")}}`}e.setToString=L;class ${constructor(){this._value="",this._pos=0}reset(t){return this._value=t,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(t){const n=t.charCodeAt(0),r=this._value.charCodeAt(this._pos);return n-r}value(){return this._value[this._pos]}}e.StringIterator=$;class Q{constructor(t=!0){this._caseSensitive=t}reset(t){return this._value=t,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let t=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(t)this._from++;else break;else t=!1;return this}cmp(t){return this._caseSensitive?(0,S.compareSubstring)(t,this._value,0,t.length,this._from,this._to):(0,S.compareSubstringIgnoreCase)(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=Q;class F{constructor(t=!0,n=!0){this._splitOnBackslash=t,this._caseSensitive=n}reset(t){return this._value=t.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let t=!0;for(;this._to<this._value.length;this._to++){const n=this._value.charCodeAt(this._to);if(n===47||this._splitOnBackslash&&n===92)if(t)this._from++;else break;else t=!1}return this}cmp(t){return this._caseSensitive?(0,S.compareSubstring)(t,this._value,0,t.length,this._from,this._to):(0,S.compareSubstringIgnoreCase)(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=F;var h;(function(E){E[E.Scheme=1]="Scheme",E[E.Authority=2]="Authority",E[E.Path=3]="Path",E[E.Query=4]="Query",E[E.Fragment=5]="Fragment"})(h||(h={}));class _{constructor(t){this._ignorePathCasing=t,this._states=[],this._stateIdx=0}reset(t){return this._value=t,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new F(!1,!this._ignorePathCasing(t)),this._pathIterator.reset(t.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(t){if(this._states[this._stateIdx]===1)return(0,S.compareIgnoreCase)(t,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,S.compareIgnoreCase)(t,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(t);if(this._states[this._stateIdx]===4)return(0,S.compare)(t,this._value.query);if(this._states[this._stateIdx]===5)return(0,S.compare)(t,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=_;class I{isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class U{constructor(t){this._iter=t}static forUris(t=()=>!1){return new U(new _(t))}static forPaths(){return new U(new F)}static forStrings(){return new U(new $)}static forConfigKeys(){return new U(new Q)}clear(){this._root=void 0}set(t,n){const r=this._iter.reset(t);let m;for(this._root||(this._root=new I,this._root.segment=r.value()),m=this._root;;){const W=r.cmp(m.segment);if(W>0)m.left||(m.left=new I,m.left.segment=r.value()),m=m.left;else if(W<0)m.right||(m.right=new I,m.right.segment=r.value()),m=m.right;else if(r.hasNext())r.next(),m.mid||(m.mid=new I,m.mid.segment=r.value()),m=m.mid;else break}const y=m.value;return m.value=n,m.key=t,y}fill(t,n){const r=n.slice(0);(0,R.shuffle)(r);for(let m of r)this.set(m,t)}get(t){return this._getNode(t)?.value}_getNode(t){const n=this._iter.reset(t);let r=this._root;for(;r;){const m=n.cmp(r.segment);if(m>0)r=r.left;else if(m<0)r=r.right;else if(n.hasNext())n.next(),r=r.mid;else break}return r}has(t){const n=this._getNode(t);return!(n?.value===void 0&&n?.mid===void 0)}delete(t){return this._delete(t,!1)}deleteSuperstr(t){return this._delete(t,!0)}_delete(t,n){const r=this._iter.reset(t),m=[];let y=this._root;for(;y;){const W=r.cmp(y.segment);if(W>0)m.push([1,y]),y=y.left;else if(W<0)m.push([-1,y]),y=y.right;else if(r.hasNext())r.next(),m.push([0,y]),y=y.mid;else{for(n?(y.left=void 0,y.mid=void 0,y.right=void 0):y.value=void 0;m.length>0&&y.isEmpty();){let[K,Y]=m.pop();switch(K){case 1:Y.left=void 0;break;case 0:Y.mid=void 0;break;case-1:Y.right=void 0;break}y=Y}break}}}findSubstr(t){const n=this._iter.reset(t);let r=this._root,m;for(;r;){const y=n.cmp(r.segment);if(y>0)r=r.left;else if(y<0)r=r.right;else if(n.hasNext())n.next(),m=r.value||m,r=r.mid;else break}return r&&r.value||m}findSuperstr(t){const n=this._iter.reset(t);let r=this._root;for(;r;){const m=n.cmp(r.segment);if(m>0)r=r.left;else if(m<0)r=r.right;else if(n.hasNext())n.next(),r=r.mid;else return r.mid?this._entries(r.mid):void 0}}forEach(t){for(const[n,r]of this)t(r,n)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(t){if(!t)return;const n=[t];for(;n.length>0;){const r=n.pop();r&&(r.value&&(yield[r.key,r.value]),r.left&&n.push(r.left),r.mid&&n.push(r.mid),r.right&&n.push(r.right))}}}e.TernarySearchTree=U;class N{constructor(t,n){this[C]="ResourceMap",t instanceof N?(this.map=new Map(t.map),this.toKey=n??N.defaultToKey):(this.map=new Map,this.toKey=t??N.defaultToKey)}set(t,n){return this.map.set(this.toKey(t),n),this}get(t){return this.map.get(this.toKey(t))}has(t){return this.map.has(this.toKey(t))}get size(){return this.map.size}clear(){this.map.clear()}delete(t){return this.map.delete(this.toKey(t))}forEach(t,n){typeof n!="undefined"&&(t=t.bind(n));for(let[r,m]of this.map)t(m,p.URI.parse(r),this)}values(){return this.map.values()}*keys(){for(let t of this.map.keys())yield p.URI.parse(t)}*entries(){for(let t of this.map.entries())yield[p.URI.parse(t[0]),t[1]]}*[(C=Symbol.toStringTag,Symbol.iterator)](){for(let t of this.map)yield[p.URI.parse(t[0]),t[1]]}}e.ResourceMap=N,N.defaultToKey=E=>E.toString();var w;(function(E){E[E.None=0]="None",E[E.AsOld=1]="AsOld",E[E.AsNew=2]="AsNew"})(w=e.Touch||(e.Touch={}));class A{constructor(){this[O]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=0){const r=this._map.get(t);if(!!r)return n!==0&&this.touch(r,n),r.value}set(t,n,r=0){let m=this._map.get(t);if(m)m.value=n,r!==0&&this.touch(m,r);else{switch(m={key:t,value:n,next:void 0,previous:void 0},r){case 0:this.addItemLast(m);break;case 1:this.addItemFirst(m);break;case 2:this.addItemLast(m);break;default:this.addItemLast(m);break}this._map.set(t,m),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){const n=this._map.get(t);if(!!n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){const r=this._state;let m=this._head;for(;m;){if(n?t.bind(n)(m.value,m.key,this):t(m.value,m.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");m=m.next}}keys(){const t=this,n=this._state;let r=this._head;const m={[Symbol.iterator](){return m},next(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){const y={value:r.key,done:!1};return r=r.next,y}else return{value:void 0,done:!0}}};return m}values(){const t=this,n=this._state;let r=this._head;const m={[Symbol.iterator](){return m},next(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){const y={value:r.value,done:!1};return r=r.next,y}else return{value:void 0,done:!0}}};return m}entries(){const t=this,n=this._state;let r=this._head;const m={[Symbol.iterator](){return m},next(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){const y={value:[r.key,r.value],done:!1};return r=r.next,y}else return{value:void 0,done:!0}}};return m}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{const n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==1&&n!==2)){if(n===1){if(t===this._head)return;const r=t.next,m=t.previous;t===this._tail?(m.next=void 0,this._tail=m):(r.previous=m,m.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===2){if(t===this._tail)return;const r=t.next,m=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=m,m.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){const t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(const[n,r]of t)this.set(n,r)}}e.LinkedMap=A;class D extends A{constructor(t,n=1){super();this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=2){return super.get(t,n)}peek(t){return super.get(t,0)}set(t,n){return super.set(t,n,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=D;class B{constructor(t){v.set(this,void 0),oe(this,v,t,"f")}get size(){return se(this,v,"f").size}forEach(t,n){se(this,v,"f").forEach(t,n)}get(t){return se(this,v,"f").get(t)}has(t){return se(this,v,"f").has(t)}entries(){return se(this,v,"f").entries()}keys(){return se(this,v,"f").keys()}values(){return se(this,v,"f").values()}[(v=new WeakMap,Symbol.iterator)](){return se(this,v,"f").entries()}}e.ReadonlyMapView=B}),define(te[11],ie([0,1,6,5]),function(V,e,R,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileAccess=e.RemoteAuthorities=e.Schemas=void 0;var p;(function(v){v.inMemory="inmemory",v.vscode="vscode",v.internal="private",v.walkThrough="walkThrough",v.walkThroughSnippet="walkThroughSnippet",v.http="http",v.https="https",v.file="file",v.mailto="mailto",v.untitled="untitled",v.data="data",v.command="command",v.vscodeRemote="vscode-remote",v.vscodeRemoteResource="vscode-remote-resource",v.userData="vscode-userdata",v.vscodeCustomEditor="vscode-custom-editor",v.vscodeNotebook="vscode-notebook",v.vscodeNotebookCell="vscode-notebook-cell",v.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",v.vscodeNotebookCellOutput="vscode-notebook-cell-output",v.vscodeInteractive="vscode-interactive",v.vscodeInteractiveInput="vscode-interactive-input",v.vscodeSettings="vscode-settings",v.vscodeWorkspaceTrust="vscode-workspace-trust",v.vscodeTerminal="vscode-terminal",v.webviewPanel="webview-panel",v.vscodeWebview="vscode-webview",v.extension="extension",v.vscodeFileResource="vscode-file",v.tmp="tmp"})(p=e.Schemas||(e.Schemas={}));class C{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(k){this._preferredWebSchema=k}setDelegate(k){this._delegate=k}set(k,q,L){this._hosts[k]=q,this._ports[k]=L}setConnectionToken(k,q){this._connectionTokens[k]=q}rewrite(k){if(this._delegate)return this._delegate(k);const q=k.authority;let L=this._hosts[q];L&&L.indexOf(":")!==-1&&(L=`[${L}]`);const $=this._ports[q],Q=this._connectionTokens[q];let F=`path=${encodeURIComponent(k.path)}`;return typeof Q=="string"&&(F+=`&tkn=${encodeURIComponent(Q)}`),S.URI.from({scheme:R.isWeb?this._preferredWebSchema:p.vscodeRemoteResource,authority:`${L}:${$}`,path:"/vscode-remote-resource",query:F})}}e.RemoteAuthorities=new C;class O{asBrowserUri(k,q){const L=this.toUri(k,q);return L.scheme===p.vscodeRemote?e.RemoteAuthorities.rewrite(L):L.scheme===p.file&&(R.isNative||typeof R.globals.importScripts=="function"&&R.globals.origin===`${p.vscodeFileResource}://${O.FALLBACK_AUTHORITY}`)?L.with({scheme:p.vscodeFileResource,authority:L.authority||O.FALLBACK_AUTHORITY,query:null,fragment:null}):L}asFileUri(k,q){const L=this.toUri(k,q);return L.scheme===p.vscodeFileResource?L.with({scheme:p.file,authority:L.authority!==O.FALLBACK_AUTHORITY?L.authority:null,query:null,fragment:null}):L}toUri(k,q){return S.URI.isUri(k)?k:S.URI.parse(q.toUrl(k))}}O.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new O}),define(te[12],ie([0,1,3,11,4,6,2,5]),function(V,e,R,S,p,C,O,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function k(F){return(0,v.uriToFsPath)(F,!0)}e.originalFSPath=k;class q{constructor(h){this._ignorePathCasing=h}compare(h,_,I=!1){return h===_?0:(0,O.compare)(this.getComparisonKey(h,I),this.getComparisonKey(_,I))}isEqual(h,_,I=!1){return h===_?!0:!h||!_?!1:this.getComparisonKey(h,I)===this.getComparisonKey(_,I)}getComparisonKey(h,_=!1){return h.with({path:this._ignorePathCasing(h)?h.path.toLowerCase():void 0,fragment:_?null:void 0}).toString()}ignorePathCasing(h){return this._ignorePathCasing(h)}isEqualOrParent(h,_,I=!1){if(h.scheme===_.scheme){if(h.scheme===S.Schemas.file)return R.isEqualOrParent(k(h),k(_),this._ignorePathCasing(h))&&h.query===_.query&&(I||h.fragment===_.fragment);if((0,e.isEqualAuthority)(h.authority,_.authority))return R.isEqualOrParent(h.path,_.path,this._ignorePathCasing(h),"/")&&h.query===_.query&&(I||h.fragment===_.fragment)}return!1}joinPath(h,..._){return v.URI.joinPath(h,..._)}basenameOrAuthority(h){return(0,e.basename)(h)||h.authority}basename(h){return p.posix.basename(h.path)}extname(h){return p.posix.extname(h.path)}dirname(h){if(h.path.length===0)return h;let _;return h.scheme===S.Schemas.file?_=v.URI.file(p.dirname(k(h))).path:(_=p.posix.dirname(h.path),h.authority&&_.length&&_.charCodeAt(0)!==47&&(console.error(`dirname("${h.toString})) resulted in a relative path`),_="/")),h.with({path:_})}normalizePath(h){if(!h.path.length)return h;let _;return h.scheme===S.Schemas.file?_=v.URI.file(p.normalize(k(h))).path:_=p.posix.normalize(h.path),h.with({path:_})}relativePath(h,_){if(h.scheme!==_.scheme||!(0,e.isEqualAuthority)(h.authority,_.authority))return;if(h.scheme===S.Schemas.file){const N=p.relative(k(h),k(_));return C.isWindows?R.toSlashes(N):N}let I=h.path||"/",U=_.path||"/";if(this._ignorePathCasing(h)){let N=0;for(const w=Math.min(I.length,U.length);N<w&&!(I.charCodeAt(N)!==U.charCodeAt(N)&&I.charAt(N).toLowerCase()!==U.charAt(N).toLowerCase());N++);I=U.substr(0,N)+I.substr(N)}return p.posix.relative(I,U)}resolvePath(h,_){if(h.scheme===S.Schemas.file){const I=v.URI.file(p.resolve(k(h),_));return h.with({authority:I.authority,path:I.path})}return _=R.toPosixPath(_),h.with({path:p.posix.resolve(h.path,_)})}isAbsolutePath(h){return!!h.path&&h.path[0]==="/"}isEqualAuthority(h,_){return h===_||(0,O.equalsIgnoreCase)(h,_)}hasTrailingPathSeparator(h,_=p.sep){if(h.scheme===S.Schemas.file){const I=k(h);return I.length>R.getRoot(I).length&&I[I.length-1]===_}else{const I=h.path;return I.length>1&&I.charCodeAt(I.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(h.fsPath)}}removeTrailingPathSeparator(h,_=p.sep){return(0,e.hasTrailingPathSeparator)(h,_)?h.with({path:h.path.substr(0,h.path.length-1)}):h}addTrailingPathSeparator(h,_=p.sep){let I=!1;if(h.scheme===S.Schemas.file){const U=k(h);I=U!==void 0&&U.length===R.getRoot(U).length&&U[U.length-1]===_}else{_="/";const U=h.path;I=U.length===1&&U.charCodeAt(U.length-1)===47}return!I&&!(0,e.hasTrailingPathSeparator)(h,_)?h.with({path:h.path+"/"}):h}}e.ExtUri=q,e.extUri=new q(()=>!1),e.extUriBiasedIgnorePathCase=new q(F=>F.scheme===S.Schemas.file?!C.isLinux:!0),e.extUriIgnorePathCase=new q(F=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function L(F,h){const _=[];for(let I=0;I<F.length;I++){const U=h(F[I]);F.some((N,w)=>w===I?!1:(0,e.isEqualOrParent)(U,h(N)))||_.push(F[I])}return _}e.distinctParents=L;var $;(function(F){F.META_DATA_LABEL="label",F.META_DATA_DESCRIPTION="description",F.META_DATA_SIZE="size",F.META_DATA_MIME="mime";function h(_){const I=new Map;_.path.substring(_.path.indexOf(";")+1,_.path.lastIndexOf(";")).split(";").forEach(w=>{const[A,D]=w.split(":");A&&D&&I.set(A,D)});const N=_.path.substring(0,_.path.indexOf(";"));return N&&I.set(F.META_DATA_MIME,N),I}F.parseMetaData=h})($=e.DataUri||(e.DataUri={}));function Q(F,h,_){if(h){let I=F.path;return I&&I[0]!==p.posix.sep&&(I=p.posix.sep+I),F.with({scheme:_,authority:h,path:I})}return F.with({scheme:_})}e.toLocalResource=Q}),define(te[13],ie([0,1,14,9,18,19,12]),function(V,e,R,S,p,C,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function v(T){return!!T&&typeof T.then=="function"}e.isThenable=v;function k(T){const a=new R.CancellationTokenSource,g=T(a.token),o=new Promise((c,d)=>{const i=a.token.onCancellationRequested(()=>{i.dispose(),a.dispose(),d((0,S.canceled)())});Promise.resolve(g).then(s=>{i.dispose(),a.dispose(),c(s)},s=>{i.dispose(),a.dispose(),d(s)})});return new class{cancel(){a.cancel()}then(c,d){return o.then(c,d)}catch(c){return this.then(void 0,c)}finally(c){return o.finally(c)}}}e.createCancelablePromise=k;function q(T,a,g){return Promise.race([T,new Promise(o=>a.onCancellationRequested(()=>o(g)))])}e.raceCancellation=q;async function L(T){let a=-1;const g=T.map((c,d)=>c.then(i=>(a=d,i))),o=await Promise.race(g);return T.forEach((c,d)=>{d!==a&&c.cancel()}),o}e.raceCancellablePromises=L;function $(T,a,g){let o;const c=setTimeout(()=>{o?.(void 0),g?.()},a);return Promise.race([T.finally(()=>clearTimeout(c)),new Promise(d=>o=d)])}e.raceTimeout=$;function Q(T){return new Promise((a,g)=>{const o=T();v(o)?o.then(a,g):a(o)})}e.asPromise=Q;class F{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(a){if(this.activePromise){if(this.queuedPromiseFactory=a,!this.queuedPromise){const g=()=>{this.queuedPromise=null;const o=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,o};this.queuedPromise=new Promise(o=>{this.activePromise.then(g,g).then(o)})}return new Promise((g,o)=>{this.queuedPromise.then(g,o)})}return this.activePromise=a(),new Promise((g,o)=>{this.activePromise.then(c=>{this.activePromise=null,g(c)},c=>{this.activePromise=null,o(c)})})}}e.Throttler=F;class h{constructor(){this.current=Promise.resolve(null)}queue(a){return this.current=this.current.then(()=>a(),()=>a())}}e.Sequencer=h;class _{constructor(){this.promiseMap=new Map}queue(a,g){const c=(this.promiseMap.get(a)??Promise.resolve()).catch(()=>{}).then(g).finally(()=>{this.promiseMap.get(a)===c&&this.promiseMap.delete(a)});return this.promiseMap.set(a,c),c}}e.SequencerByKey=_;class I{constructor(a){this.defaultDelay=a,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(a,g=this.defaultDelay){return this.task=a,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((o,c)=>{this.doResolve=o,this.doReject=c}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const o=this.task;return this.task=null,o()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},g),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject((0,S.canceled)()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}e.Delayer=I;class U{constructor(a){this.delayer=new I(a),this.throttler=new F}trigger(a,g){return this.delayer.trigger(()=>this.throttler.queue(a),g)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=U;class N{constructor(){this._isOpen=!1,this._promise=new Promise((a,g)=>{this._completePromise=a})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=N;class w extends N{constructor(a){super();this._timeout=setTimeout(()=>this.open(),a)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=w;function A(T,a){return a?new Promise((g,o)=>{const c=setTimeout(()=>{d.dispose(),g()},T),d=a.onCancellationRequested(()=>{clearTimeout(c),d.dispose(),o((0,S.canceled)())})}):k(g=>A(T,g))}e.timeout=A;function D(T,a=0){const g=setTimeout(T,a);return(0,C.toDisposable)(()=>clearTimeout(g))}e.disposableTimeout=D;function B(T){const a=[];let g=0;const o=T.length;function c(){return g<o?T[g++]():null}function d(i){i!=null&&a.push(i);const s=c();return s?s.then(d):Promise.resolve(a)}return Promise.resolve(null).then(d)}e.sequence=B;function E(T,a=o=>!!o,g=null){let o=0;const c=T.length,d=()=>{if(o>=c)return Promise.resolve(g);const i=T[o++];return Promise.resolve(i()).then(l=>a(l)?Promise.resolve(l):d())};return d()}e.first=E;function t(T,a=o=>!!o,g=null){if(T.length===0)return Promise.resolve(g);let o=T.length;const c=()=>{o=-1;for(const d of T)d.cancel?.()};return new Promise((d,i)=>{for(const s of T)s.then(l=>{--o>=0&&a(l)?(c(),d(l)):o===0&&d(g)}).catch(l=>{--o>=0&&(c(),i(l))})})}e.firstParallel=t;class n{constructor(a){this._size=0,this.maxDegreeOfParalellism=a,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new p.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(a){return this._size++,new Promise((g,o)=>{this.outstandingPromises.push({factory:a,c:g,e:o}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const a=this.outstandingPromises.shift();this.runningPromises++;const g=a.factory();g.then(a.c,a.e),g.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}e.Limiter=n;class r extends n{constructor(){super(1)}}e.Queue=r;class m{constructor(){this.queues=new Map}queueFor(a,g=O.extUri){const o=g.getComparisonKey(a);let c=this.queues.get(o);return c||(c=new r,p.Event.once(c.onFinished)(()=>{c?.dispose(),this.queues.delete(o)}),this.queues.set(o,c)),c}dispose(){this.queues.forEach(a=>a.dispose()),this.queues.clear()}}e.ResourceQueue=m;class y{constructor(a,g){this._token=-1,typeof a=="function"&&typeof g=="number"&&this.setIfNotSet(a,g)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(a,g){this.cancel(),this._token=setTimeout(()=>{this._token=-1,a()},g)}setIfNotSet(a,g){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,a()},g))}}e.TimeoutTimer=y;class W{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(a,g){this.cancel(),this._token=setInterval(()=>{a()},g)}}e.IntervalTimer=W;class K{constructor(a,g){this.timeoutToken=-1,this.runner=a,this.timeout=g,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(a=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,a)}get delay(){return this.timeout}set delay(a){this.timeout=a}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}e.RunOnceScheduler=K;class Y{constructor(a,g){g%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${g}ms is not a multiple of 1000ms.`),this.runner=a,this.timeout=g,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(a=this.timeout){a%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${a}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(a/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner&&this.runner())}}e.ProcessTimeRunOnceScheduler=Y;class z extends K{constructor(a,g){super(a,g);this.units=[]}work(a){this.units.push(a),this.isScheduled()||this.schedule()}doRun(){const a=this.units;this.units=[],this.runner&&this.runner(a)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=z;class X extends C.Disposable{constructor(a,g,o,c){super();this.maxWorkChunkSize=a,this.maxPendingWork=g,this.throttleDelay=o,this.handler=c,this.pendingWork=[],this.throttler=this._register(new C.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(a){if(this.disposed)return!1;if(typeof this.maxPendingWork=="number"){if(this.throttler.value){if(this.pending+a.length>this.maxPendingWork)return!1}else if(this.pending+a.length-this.maxWorkChunkSize>this.maxPendingWork)return!1}return this.pendingWork.push(...a),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new K(()=>{this.throttler.clear(),this.doWork()},this.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=X,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=T=>{const a=setTimeout(()=>{const o=Date.now()+15;T(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,o-Date.now())}}))});let g=!1;return{dispose(){g||(g=!0,clearTimeout(a))}}}:e.runWhenIdle=(T,a)=>{const g=requestIdleCallback(T,typeof a=="number"?{timeout:a}:void 0);let o=!1;return{dispose(){o||(o=!0,cancelIdleCallback(g))}}}}();class H{constructor(a){this._didRun=!1,this._executor=()=>{try{this._value=a()}catch(g){this._error=g}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=H;async function J(T,a,g){let o;for(let c=0;c<g;c++)try{return await T()}catch(d){o=d,await A(a)}throw o}e.retry=J;class ee{hasPending(a){return this._pending?typeof a=="number"?this._pending.taskId===a:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(a,g,o){return this._pending={taskId:a,cancel:()=>o?.(),promise:g},g.then(()=>this.donePending(a),()=>this.donePending(a)),g}donePending(a){this._pending&&a===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const a=this._next;this._next=void 0,a.run().then(a.promiseResolve,a.promiseReject)}}setNext(a){if(this._next)this._next.run=a;else{let g,o;const c=new Promise((d,i)=>{g=d,o=i});this._next={run:a,promise:c,promiseResolve:g,promiseReject:o}}return this._next.promise}}e.TaskSequentializer=ee;class x{constructor(a){this.interval=a,this.lastIncrementTime=0,this.value=0}increment(){const a=Date.now();return a-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=a,this.value=0),this.value++,this.value}}e.IntervalCounter=x;class ne{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((a,g)=>{this.completeCallback=a,this.errorCallback=g})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(a){return new Promise(g=>{this.completeCallback(a),this.resolved=!0,g()})}error(a){return new Promise(g=>{this.errorCallback(a),this.rejected=!0,g()})}cancel(){new Promise(a=>{this.errorCallback((0,S.canceled)()),this.rejected=!0,a()})}}e.DeferredPromise=ne;var re;(function(T){async function a(g){let o;const c=await Promise.all(g.map(d=>d.then(i=>i,i=>{o||(o=i)})));if(typeof o!="undefined")throw o;return c}T.settled=a})(re=e.Promises||(e.Promises={}))}),define(te[7],ie([0,1,13,3,10,4,2]),function(V,e,R,S,p,C,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.hasSiblingFn=e.hasSiblingPromiseFn=e.parse=e.match=e.splitGlobAware=e.getEmptyExpression=void 0;function v(){return Object.create(null)}e.getEmptyExpression=v;const k="**",q="/",L="[/\\\\]",$="[^/\\\\]",Q=/\//g;function F(o){switch(o){case 0:return"";case 1:return`${$}*?`;default:return`(?:${L}|${$}+${L}|${L}${$}+)*?`}}function h(o,c){if(!o)return[];const d=[];let i=!1,s=!1,l="";for(const f of o){switch(f){case c:if(!i&&!s){d.push(l),l="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}l+=f}return l&&d.push(l),d}e.splitGlobAware=h;function _(o){if(!o)return"";let c="";const d=h(o,q);if(d.every(i=>i===k))c=".*";else{let i=!1;d.forEach((s,l)=>{if(s===k){i||(c+=F(2),i=!0);return}let f=!1,u="",P=!1,b="";for(const M of s){if(M!=="}"&&f){u+=M;continue}if(P&&(M!=="]"||!b)){let j;M==="-"?j=M:(M==="^"||M==="!")&&!b?j="^":M===q?j="":j=O.escapeRegExpCharacters(M),b+=j;continue}switch(M){case"{":f=!0;continue;case"[":P=!0;continue;case"}":c+=`(?:${h(u,",").map(Z=>_(Z)).join("|")})`,f=!1,u="";break;case"]":c+="["+b+"]",P=!1,b="";break;case"?":c+=$;continue;case"*":c+=F(1);continue;default:c+=O.escapeRegExpCharacters(M)}}l<d.length-1&&(d[l+1]!==k||l+2<d.length)&&(c+=L),i=!1})}return c}const I=/^\*\*\/\*\.[\w\.-]+$/,U=/^\*\*\/([\w\.-]+)\/?$/,N=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,w=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,A=/^\*\*((\/[\w\.-]+)+)\/?$/,D=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,B=new p.LRUCache(1e4),E=function(){return!1},t=function(){return null};function n(o,c){if(!o)return t;let d;typeof o!="string"?d=o.pattern:d=o,d=d.trim();const i=`${d}_${!!c.trimForExclusions}`;let s=B.get(i);if(s)return r(s,o);let l;if(I.test(d)){const f=d.substr(4);s=function(u,P){return typeof u=="string"&&u.endsWith(f)?d:null}}else(l=U.exec(m(d,c)))?s=y(l[1],d):(c.trimForExclusions?w:N).test(d)?s=W(d,c):(l=A.exec(m(d,c)))?s=K(l[1].substr(1),d,!0):(l=D.exec(m(d,c)))?s=K(l[1],d,!1):s=Y(d);return B.set(i,s),r(s,o)}function r(o,c){return typeof c=="string"?o:function(d,i){return S.isEqualOrParent(d,c.base)?o(C.relative(c.base,d),i):null}}function m(o,c){return c.trimForExclusions&&o.endsWith("/**")?o.substr(0,o.length-2):o}function y(o,c){const d=`/${o}`,i=`\\${o}`,s=function(f,u){return typeof f!="string"?null:u?u===o?c:null:f===o||f.endsWith(d)||f.endsWith(i)?c:null},l=[o];return s.basenames=l,s.patterns=[c],s.allBasenames=l,s}function W(o,c){const d=g(o.slice(1,-1).split(",").map(u=>n(u,c)).filter(u=>u!==t),o),i=d.length;if(!i)return t;if(i===1)return d[0];const s=function(u,P){for(let b=0,M=d.length;b<M;b++)if(d[b](u,P))return o;return null},l=d.find(u=>!!u.allBasenames);l&&(s.allBasenames=l.allBasenames);const f=d.reduce((u,P)=>P.allPaths?u.concat(P.allPaths):u,[]);return f.length&&(s.allPaths=f),s}function K(o,c,d){const i=C.sep===C.posix.sep,s=i?o:o.replace(Q,C.sep),l=C.sep+s,f=C.posix.sep+o,u=d?function(P,b){return typeof P=="string"&&(P===s||P.endsWith(l)||!i&&(P===o||P.endsWith(f)))?c:null}:function(P,b){return typeof P=="string"&&(P===s||!i&&P===o)?c:null};return u.allPaths=[(d?"*/":"./")+o],u}function Y(o){try{const c=new RegExp(`^${_(o)}$`);return function(d){return c.lastIndex=0,typeof d=="string"&&c.test(d)?o:null}}catch(c){return t}}function z(o,c,d){return!o||typeof c!="string"?!1:X(o)(c,void 0,d)}e.match=z;function X(o,c={}){if(!o)return E;if(typeof o=="string"||x(o)){const d=n(o,c);if(d===t)return E;const i=function(s,l){return!!d(s,l)};return d.allBasenames&&(i.allBasenames=d.allBasenames),d.allPaths&&(i.allPaths=d.allPaths),i}return T(o,c)}e.parse=X;function H(o){if(!o)return;let c;return d=>(c||(c=(o()||Promise.resolve([])).then(i=>i?ee(i):{})),c.then(i=>!!i[d]))}e.hasSiblingPromiseFn=H;function J(o){if(!o)return;let c;return d=>{if(!c){const i=o();c=i?ee(i):{}}return!!c[d]}}e.hasSiblingFn=J;function ee(o){const c={};for(const d of o)c[d]=!0;return c}function x(o){const c=o;return c&&typeof c.base=="string"&&typeof c.pattern=="string"}e.isRelativePattern=x;function ne(o){return o.allBasenames||[]}e.getBasenameTerms=ne;function re(o){return o.allPaths||[]}e.getPathTerms=re;function T(o,c){const d=g(Object.getOwnPropertyNames(o).map(u=>a(u,o[u],c)).filter(u=>u!==t)),i=d.length;if(!i)return t;if(!d.some(u=>!!u.requiresSiblings)){if(i===1)return d[0];const u=function(M,j){for(let G=0,Z=d.length;G<Z;G++){const le=d[G](M,j);if(le)return le}return null},P=d.find(M=>!!M.allBasenames);P&&(u.allBasenames=P.allBasenames);const b=d.reduce((M,j)=>j.allPaths?M.concat(j.allPaths):M,[]);return b.length&&(u.allPaths=b),u}const s=function(u,P,b){let M;for(let j=0,G=d.length;j<G;j++){const Z=d[j];Z.requiresSiblings&&b&&(P||(P=C.basename(u)),M||(M=P.substr(0,P.length-C.extname(u).length)));const le=Z(u,P,M,b);if(le)return le}return null},l=d.find(u=>!!u.allBasenames);l&&(s.allBasenames=l.allBasenames);const f=d.reduce((u,P)=>P.allPaths?u.concat(P.allPaths):u,[]);return f.length&&(s.allPaths=f),s}function a(o,c,d){if(c===!1)return t;const i=n(o,d);if(i===t)return t;if(typeof c=="boolean")return i;if(c){const s=c.when;if(typeof s=="string"){const l=(f,u,P,b)=>{if(!b||!i(f,u))return null;const M=s.replace("$(basename)",P),j=b(M);return(0,R.isThenable)(j)?j.then(G=>G?o:null):j?o:null};return l.requiresSiblings=!0,l}}return i}function g(o,c){const d=o.filter(u=>!!u.basenames);if(d.length<2)return o;const i=d.reduce((u,P)=>{const b=P.basenames;return b?u.concat(b):u},[]);let s;if(c){s=[];for(let u=0,P=i.length;u<P;u++)s.push(c)}else s=d.reduce((u,P)=>{const b=P.patterns;return b?u.concat(b):u},[]);const l=function(u,P){if(typeof u!="string")return null;if(!P){let M;for(M=u.length;M>0;M--){const j=u.charCodeAt(M-1);if(j===47||j===92)break}P=u.substr(M)}const b=i.indexOf(P);return b!==-1?s[b]:null};l.basenames=i,l.patterns=s,l.allBasenames=i;const f=o.filter(u=>!u.basenames);return f.push(l),f}}),define(te[15],ie([0,1,20]),function(V,e,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const S=(p,C,O)=>{let v;if(p[0]===255&&p[1]===254)v=new TextDecoder("utf-16le").decode(p);else if(p[0]===254&&p[1]===255)v=new TextDecoder("utf-16be").decode(p);else if(v=new TextDecoder("utf8").decode(p),v.slice(0,1e3).includes("\uFFFD")&&p.includes(0))return[];const k=[],q=[];let L=null,$=O.remainingResultQuota;for(;$>=0&&(L=C.exec(v));)q.push({matchStartIndex:L.index,matchedText:L[0]}),$--;if(q.length){const Q=new Set,F=new Set,h=[],_=A=>v.slice(h[A].start,h[A].end);let I=0,U=null;const N=/\r?\n/g;for(;U=N.exec(v);)h.push({start:I,end:U.index}),I=U.index+U[0].length;I<v.length&&h.push({start:I,end:v.length});let w=0;for(const{matchStartIndex:A,matchedText:D}of q){if($<0)break;for(;Boolean(h[w+1])&&A>h[w].end;)w++;let B=w;for(;Boolean(h[B+1])&&A+D.length>h[B].end;)B++;if(O.beforeContext)for(let y=Math.max(0,w-O.beforeContext);y<w;y++)Q.add(y);let E="",t=0;for(let y=w;y<=B;y++){let W=_(y);O.previewOptions?.charsPerLine&&W.length>O.previewOptions.charsPerLine&&(t=Math.max(A-h[w].start-20,0),W=W.substr(t,O.previewOptions.charsPerLine)),E+=`${W}
`,F.add(y)}const n=new R.Range(w,A-h[w].start,B,A+D.length-h[B].start),r=new R.Range(0,A-h[w].start-t,B-w,A+D.length-h[B].start-(B===w?t:0)),m={ranges:n,preview:{text:E,matches:r}};if(k.push(m),O.afterContext)for(let y=B+1;y<=Math.min(B+O.afterContext,h.length-1);y++)Q.add(y)}for(const A of Q)F.has(A)||k.push({text:_(A),lineNumber:A+1})}return k};e.getFileResults=S}),define(te[16],ie([0,1,7]),function(V,e,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class S{constructor(C,O,v){this.isPathIgnored=this.parseIgnoreFile(C,O,v)}isPathIncludedInTraversal(C,O){if(C[0]!=="/"||C[C.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+C);return!this.isPathIgnored(C,O)}isArbitraryPathIgnored(C,O){if(C[0]!=="/"||C[C.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+C);const v=C.split("/").filter(L=>L);let k=!1,q="";for(let L=0;L<v.length;L++){const $=L===v.length-1,Q=v[L];if(q=q+"/"+Q,!this.isPathIncludedInTraversal(q,$?O:!0)){k=!0;break}}return k}gitignoreLinesToExpression(C,O,v){const k=C.map(L=>this.gitignoreLineToGlob(L,O)),q=Object.create(null);for(const L of k)q[L]=!0;return R.parse(q,{trimForExclusions:v})}parseIgnoreFile(C,O,v){const k=C.split(`
`).map(w=>w.trim()).filter(w=>w&&w[0]!=="#"),q=k.filter(w=>!w.endsWith("/")),L=q.filter(w=>!w.includes("!")),$=this.gitignoreLinesToExpression(L,O,!0),Q=q.filter(w=>w.includes("!")).map(w=>w.replace(/!/g,"")),F=this.gitignoreLinesToExpression(Q,O,!1),h=k.filter(w=>!w.includes("!")),_=this.gitignoreLinesToExpression(h,O,!0),I=k.filter(w=>w.includes("!")).map(w=>w.replace(/!/g,"")),U=this.gitignoreLinesToExpression(I,O,!1);return(w,A)=>w.startsWith(O)?A&&_(w)&&!U(w)||$(w)&&!F(w)?!0:v?v.isPathIgnored(w,A):!1:!1}gitignoreLineToGlob(C,O){const v=C.indexOf("/");return v===-1||v===C.length-1?C="**/"+C:(v===0&&(C=C.slice(1)),C=O+C),C}}e.IgnoreFile=S}),define(te[21],ie([0,1,7,5,3,4,14,15,16,2]),function(V,e,R,S,p,C,O,v,k,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const L=!1,$=+new Date,Q={},F=async(w,A)=>{if(!L)return A();const D=Date.now(),B=(Q[w]??0)+1;console.info(w,B,"starting",Math.round((D-$)*10)/1e4),Q[w]=B;const E=await A(),t=Date.now();return console.info(w,B,"took",t-D),E};function h(w){return new _(w)}e.create=h;class _{constructor(A){this.host=A,this.cancellationTokens=new Map}cancelQuery(A){this.cancellationTokens.get(A)?.cancel()}registerCancellationToken(A){const D=new O.CancellationTokenSource;return this.cancellationTokens.set(A,D),D}async listDirectory(A,D,B,E){const t=this.registerCancellationToken(E),n=[];let r=!1,m=0;const y=D.maxResults||512,W=D.filePattern?K=>D.filePattern.split("").every(Y=>K.includes(Y)):K=>!0;return await F("listDirectory",()=>this.walkFolderQuery(A,D,B,K=>{if(!!W(K.name))return m++,y&&m>y&&(r=!0,t.cancel()),n.push(K.path)},t.token)),{results:n,limitHit:r}}async searchDirectory(A,D,B,E){return F("searchInFiles",async()=>{const t=this.registerCancellationToken(E),n=[],r=I(D.contentPattern),m=[];let y=0,W=0,K=!1;const Y=async z=>{if(t.token.isCancellationRequested)return;y++;const X=await z.resolve();if(t.token.isCancellationRequested)return;const H=new Uint8Array(X),J=(0,v.getFileResults)(H,r,{afterContext:D.afterContext??0,beforeContext:D.beforeContext??0,previewOptions:D.previewOptions,remainingResultQuota:D.maxResults?D.maxResults-W:1e4});if(J.length){W+=J.length,D.maxResults&&W>D.maxResults&&t.cancel();const ee={resource:S.URI.joinPath(S.URI.revive(B.folder),z.path),results:J};this.host.sendTextSearchMatch(ee,E),n.push(ee)}};return await F("walkFolderToResolve",()=>this.walkFolderQuery(A,D,B,async z=>m.push(Y(z)),t.token)),await F("resolveOngoingProcesses",()=>Promise.all(m)),L&&console.log("Searched in",y,"files"),{results:n,limitHit:K}})}async walkFolderQuery(A,D,B,E,t){const n=R.parse(B.excludePattern??{},{trimForExclusions:!0}),r=(z,X,H)=>(z=z.slice(1),!!(n(z,X,H)||U(D,z))),m=(z,X,H)=>(z=z.slice(1),!(n(z,X,H)||!N(D,z))),y=(z,X)=>({type:"file",name:z.name,path:X,resolve:()=>z.getFile().then(J=>J.arrayBuffer())}),W=async(z,X,H)=>{if(!B.disregardIgnoreFiles){const ee=await Promise.all([z.getFileHandle(".gitignore").catch(x=>{}),z.getFileHandle(".ignore").catch(x=>{})]);await Promise.all(ee.map(async x=>{if(!x)return;const ne=new TextDecoder("utf8").decode(new Uint8Array(await(await x.getFile()).arrayBuffer()));H=new k.IgnoreFile(ne,X,H)}))}const J=new Promise(async ee=>{const x=[],ne=[],re=[],T=new Set;for await(const a of z.entries())re.push(a),T.add(a[0]);for(const[a,g]of re){if(t.isCancellationRequested)break;const o=X+a;if(H&&!H.isPathIncludedInTraversal(o,g.kind==="directory"))continue;const c=d=>T.has(d);g.kind==="directory"&&!r(o,a,c)?ne.push(W(g,o+"/",H)):g.kind==="file"&&m(o,a,c)&&x.push(y(g,o))}ee([...await Promise.all(ne),...x])});return{type:"dir",name:z.name,entries:J}},K=async(z,X)=>{t.isCancellationRequested||await Promise.all((await z.entries).sort((H,J)=>-(H.type==="dir"?0:1)+(J.type==="dir"?0:1)).map(async H=>H.type==="dir"?K(H,X):X(H)))},Y=await F("process",()=>W(A,"/"));await F("resolve",()=>K(Y,E))}}e.LocalFileSearchSimpleWorker=_;function I(w){return(0,q.createRegExp)(w.pattern,!!w.isRegExp,{wholeWord:w.isWordMatch,global:!0,matchCase:w.isCaseSensitive,multiline:!0,unicode:!0})}function U(w,A){return!!(w.excludePattern&&R.match(w.excludePattern,A))}function N(w,A){return w.excludePattern&&R.match(w.excludePattern,A)?!1:w.includePattern||w.usingSearchPaths?w.includePattern&&R.match(w.includePattern,A)?!0:w.usingSearchPaths?!!w.folderQueries&&w.folderQueries.some(D=>{const B=D.folder.path;if(p.isEqualOrParent(A,B)){const E=C.relative(B,A);return!D.includePattern||!!R.match(D.includePattern,E)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/6cba118ac49a1b88332f312a8f67186f7f3c1643/core/vs/workbench/services/search/worker/localFileSearch.js.map
